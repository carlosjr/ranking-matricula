(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0b8e12"],{3120:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("q-page",{staticClass:"flex flex-center"},[t("div",{staticClass:"col q-pa-md"},[t("div",{staticClass:"row justify-center"},[t("div",{staticClass:"q-mb-md col col-xs-10 col-sm-10"},[t("q-table",{attrs:{title:"Usuários",data:e.data,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"header",fn:function(s){return t("q-tr",{},e._l(s.cols,(function(a){return t("q-th",{key:a.name,staticClass:"text-blue-10",attrs:{props:s}},[e._v("\n              "+e._s(a.label)+"\n            ")])})),1)}},{key:"body",fn:function(s){return[t("q-tr",{attrs:{props:s}},[t("q-td",{key:"id",attrs:{props:s}},[e._v(e._s(s.row.id))]),t("q-td",{key:"name",attrs:{props:s}},[e._v(e._s(s.row.name))]),t("q-td",{key:"email",attrs:{props:s}},[e._v(e._s(s.row.email))]),t("q-td",{key:"role",attrs:{props:s}},[e._v(e._s(s.row.role))]),t("q-td",[t("q-btn",{staticClass:"cursor-pointer",attrs:{small:"",flat:"",icon:"edit"},on:{click:function(t){return e.getUserById(s.row.id)}}}),t("q-btn",{staticClass:"cursor-pointer",attrs:{small:"",flat:"",icon:"delete"},on:{click:function(t){return e.deleteById(s.row.id)}}})],1)],1)]}}])})],1),t("q-card",{staticClass:"q-pa-md text-blue col-10"},[t("q-card-section",[t("div",{staticClass:"text-h6 text-blue-10"},[e._v("Novo Usuário")])]),t("q-card-section",[t("div",{staticClass:"q-gutter-sm"},[t("q-input",{attrs:{rounded:"",filled:"",label:"Nome"},model:{value:e.user.name,callback:function(s){e.$set(e.user,"name",s)},expression:"user.name"}}),t("q-input",{attrs:{square:"",filled:"",label:"Email"},model:{value:e.user.email,callback:function(s){e.$set(e.user,"email",s)},expression:"user.email"}}),t("q-select",{attrs:{square:"",filled:"",options:e.roles,label:"Cargo"},model:{value:e.user.role,callback:function(s){e.$set(e.user,"role",s)},expression:"user.role"}}),t("q-input",{attrs:{type:"password",square:"",filled:"",label:"Senha"},model:{value:e.user.password,callback:function(s){e.$set(e.user,"password",s)},expression:"user.password"}}),t("q-input",{attrs:{type:"password",square:"",filled:"",label:"Confirmar senha"},model:{value:e.confirmPassword,callback:function(s){e.confirmPassword=s},expression:"confirmPassword"}})],1)]),t("q-separator",{attrs:{dark:""}}),t("q-card-actions",[t("q-btn",{staticClass:"text-blue-10",attrs:{flat:""},on:{click:e.saveUser}},[e._v("Salvar")]),t("q-btn",{staticClass:"text-blue-10",attrs:{flat:""},on:{click:e.newUser}},[e._v("Novo")])],1)],1)],1)])])},o=[],r=t("c1df"),n=t.n(r),l=t("758b"),i=t("2009"),c={name:"PageIndex",data:function(){return{user:{},confirmPassword:"",roles:["NIVEL1","NIVEL2","NIVEL3"],columns:[{name:"id",label:"Código",field:"id",sortable:!0,align:"left"},{name:"name",label:"Nome",field:"name",sortable:!0,align:"left"},{name:"email",label:"Email",field:"email",sortable:!0,align:"left"},{name:"role",label:"Cargo",field:"role",sortable:!0,align:"left"}],data:[]}},mounted:function(){this.getUsers()},methods:{newUser:function(){this.user={},this.confirmPassword=""},saveUser:function(){var e=this;console.log(this.user.dt_birth,n()(this.user.dt_birth,"DD/MM/YYYY")),this.user.email?this.user.password?this.confirmPassword===this.user.password?(this.user.dt_birth=n()(this.user.dt_birth,"DD/MM/YYYY"),this.user.id?l["a"].post("users/update/".concat(this.user.id),this.user).then((function(s){console.log(s),e.user={},e.confirmPassword="",e.getUsers(),i["b"].notify.success("Usuário atualizado!")})).catch((function(e){console.log(e),i["b"].notify.error("Usuário não atualizado! "+e)})):l["a"].post("users",this.user).then((function(s){console.log(s),e.user={},e.confirmPassword="",e.getUsers(),i["b"].notify.success("Usuário cadastrado!")})).catch((function(e){console.log(e),i["b"].notify.error("Usuário não cadastrado! "+e)}))):i["b"].notify.warn("Campo Senha e Confirmar senha devem ser iguais!"):i["b"].notify.warn("Campo Senha deve ser preenchido!"):i["b"].notify.warn("Campo Email deve ser preenchido!")},getUsers:function(){var e=this;l["a"].get("users",{}).then((function(s){console.log(s),e.data=s.data})).catch((function(e){console.log(e)}))},getUserById:function(e){var s=this;l["a"].get("users/".concat(e),{}).then((function(e){s.user=e.data||{},s.user&&delete s.user.password,console.log(e)})).catch((function(e){console.log(e),i["b"].notify.error(e)}))},deleteById:function(e){var s=this;this.$q.dialog({dark:!0,title:"Atencão",message:"Deseja realmente excluir o usuário?",cancel:"Cancelar",persistent:!0}).onOk((function(){l["a"].post("users/delete/".concat(e),{}).then((function(e){console.log(e),s.getUsers()})).catch((function(e){console.log(e),i["b"].notify.error(e)}))})).onCancel((function(){console.log(">>>> Cancel")}))}}},u=c,d=t("2877"),f=Object(d["a"])(u,a,o,!1,null,null,null);s["default"]=f.exports}}]);